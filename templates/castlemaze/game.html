{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
    {{ game }}
{% endblock title %}
{% block styling %}
    {{ block.super }}
    <style type="text/css">

    .castlemaze-table {
        table-layout:fixed;
        display:block;
        border-width: 2px;
        width: 1000px;
        height: 600px;
    }

    .castlemaze-cell {
        background-color: #debb27;
        width: 70px;
        height: 70px;
        text-align: center;
        vertical-align: middle !important;
        padding:0px;
        margin:0px;
        position: absolute;
        transition: left 1s ease-out, top 1s ease-out;
    }
    .castlemaze-card {
        background-color: #debb27;
        width: 100px;
        height: 100px;
        text-align: center;
        vertical-align: middle !important;
        padding:0px;
        margin:0px;
    }
    .clickable:hover {
        background-color:green;
        filter: drop-shadow(8px 8px 12px);
    }

    </style>
{% endblock styling %}

{% block content %}
    <div style="overflow: auto; max-height:600px; position:relative;">
        <table class="table-bordered castlemaze-table">
            {% for row in game.board %}
                <tr>
                    {% for cell in row %}
                        {% if cell.is_clickable %}
                            <td id="cell_{{cell.id}}" value="{{cell.pk}}" class="castlemaze-cell clickable" style="padding:0px; left:{{cell.get_left_offset}}px;  top:{{cell.get_top_offset}}px;" onclick="action_request(id)">
                        {% else %}
                            <td id="cell_{{cell.id}}" value="{{cell.pk}}" class="castlemaze-cell" style="padding:0px; left:{{cell.get_left_offset}}px;  top:{{cell.get_top_offset}}px;" >
                        {% endif %}
                            {% if cell.get_display %}
                                <img 
                                    width=70px
                                    src="{% static cell.get_display %}"
                                />
                            {% endif %}
                        </td>
                    {% endfor %}
                </tr>
            {% endfor %} 
        </table>
       
    </div>
    <p></p>
     <div style="position:absolu; width:800px; height:100px; left: 1800px; top:2200px">
            <table>
                <tr>
                    {% for card in cards  %}
                        <td id="card_{{card.pk}}" value="{{card.pk}}" class="castlemaze-card" style="padding:0px;" onclick="select_card(id)">
                                        <img 
                                            width=100px
                                            src="{% static card.get_display %}"
                                        />
                        </td>
                    {% endfor %}
                </tr>
            </table>
        </div>
    <script src="{% static 'scripts/castlemaze/main.js' %}"></script>
{% endblock content %}